Totally based on Flask tutorial.
